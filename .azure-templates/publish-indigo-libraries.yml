# Copyright Â© 2020 TomTom NV. All rights reserved.
#
# This software is the proprietary copyright of TomTom NV and its subsidiaries and may be
# used for internal evaluation purposes or commercial use strictly subject to separate
# license agreement between you and TomTom NV. If you are the licensee, you are only permitted
# to use this software in accordance with the terms of your license agreement. If you are
# not the licensee, you are not authorized to use this software in any manner and should
# immediately return or destroy it.

# Azure pipelines documentation is available at
# https://aka.ms/yaml

parameters:
  iviVersion: ''

steps:
  - checkout: indigo-pr

  - template: gradle/gradle.yml@devops-templates
    parameters:
      tasks: >-
        publishLibrariesPublicationToArtifactoryRepository
        artifactoryPublish
      projectOptions: >-
        -PartifactoryBaseUrl=$(artifactoryBaseUrl)
        -PartifactoryUser=$(artifactoryUser)
        -PartifactoryToken=$(artifactoryToken)
        -PartifactoryRepo=$(artifactoryRepo)
        -PiviVersion=${{parameters.iviVersion}}
        -PdependenciesCatalogOnly
        -Dorg.gradle.internal.http.socketTimeout=900000
        -Dorg.gradle.internal.http.connectionTimeout=900000
      displayName: 'Publish libraries to ivi-test Artifactory'
