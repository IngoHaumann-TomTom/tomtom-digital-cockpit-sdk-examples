---
title: Change Localization Settings
layout: default
---

## Localization API overview

TomTom Digital Cockpit provides a comprehensive set of tools for changing the localization
features of the in-vehicle system such as units of measurement and language.
This allows for greater customisation and scalability across various regions, allowing the driver
to interact with language and measurements which are familiar to them.

Currently the Localization API module [`platform_localization_api_common_settings`](TTIVI_PLATFORM_API)
allows for the following in-app customisations:
- __Language changing__: package [`com.tomtom.ivi.platform.localization.api.common.settings`](TTIVI_PLATFORM_API)
- __Time format changing__: package [`com.tomtom.ivi.platform.localization.api.common.settings`](TTIVI_PLATFORM_API)

## How to use the API to change the system language

Language changing API for switching the 
[Android Locale](https://developer.android.com/reference/java/util/Locale) at a system level.

The language change is called via the function [`com.tomtom.ivi.platform.localization.api.common.settings`](TTIVI_PLATFORM_API)`.setSystemLocale`
by passing an [Android Locale](https://developer.android.com/reference/kotlin/java/util/Locale)
object initialised with the desired `language` and `region` fields as illustrated below.

```kotlin
import com.tomtom.ivi.platform.localization.api.common.settings.setSystemLocale

// Change the system locale to Spanish (language) US (region)
val spanishLocale = Locale("es", "US")
setSystemLocale(spanishLocale)

// Change the system locale to Italian (language)
val italianLocale = Locale("it")
setSystemLocale(italianLocale)
```

Because this API switches the whole system Locale, the change in localization 
is also reflected in third-party apps.

__Note:__ Triggering a system locale change by calling this API will cause all activities to restart.

### Setting system locale with invalid locale

The [Android Locale](https://developer.android.com/reference/kotlin/java/util/Locale) does not 
perform any validation of the `language` or `region` fields it is constructed with. It is possible 
to construct an instance of a `Locale` with an invalid language or region field not corresponding to 
any language or country, such as follows:

```kotlin
val invalidLocale = Locale("invalidLanguage", "invalidRegion")
setSystemLocale(invalidLocale)
```

In these instances it is worth noting that the typical behaviour of the Android system is to fallback
to __US English__.

### Setting system locale with same locale as current

If the user attempts to set a new Locale which is the same as the current one, the Android system
will do nothing.

## How to use the API to change the clock time format between 12 hours and 24 hours

TomTom Digital Cockpit provides an API which allows for customisation of the Android system clock
time format. The tool allows both for setting the desired time format and for retrieving the current
time format setting.

### Setting the desired time format

To change the clock time format to the desired setting, a call should be made to the function
[`com.tomtom.ivi.platform.localization.api.common.settings`](TTIVI_PLATFORM_API)`.setClockTimeFormat`
by passing as parameters the `Context` instance and the desired setting in the following enum
format:
- [`com.tomtom.ivi.platform.localization.api.common.settings`](TTIVI_PLATFORM_API)`.TimeFormat.CLOCK_12H` for a 12 hour format.
- [`com.tomtom.ivi.platform.localization.api.common.settings`](TTIVI_PLATFORM_API)`.TimeFormat.CLOCK_24H` for a 24 hour format.

It is also possible to call the API with the enum value [`com.tomtom.ivi.platform.localization.api.common.settings`](TTIVI_PLATFORM_API)`.TimeFormat.UNSET`.
In this case, the API will default to setting the 24-hour format.

```kotlin
import com.tomtom.ivi.platform.localization.api.common.settings.setSystemLocale

// Change the clock format to 12 hours, e.g. 2:20pm
setClockTimeFormat(activityContext, TimeFormat.CLOCK_12H)

// Change the clock format to 24 hours, e.g. 14:20
setClockTimeFormat(activityContext, TimeFormat.CLOCK_24H)
```

### Retrieving the current system time format

To retrieve the current system time format, simply call
[`com.tomtom.ivi.platform.localization.api.common.settings`](TTIVI_PLATFORM_API)`.getClockTimeFormat`
and pass in the `Context`. The API will return a
[`com.tomtom.ivi.platform.localization.api.common.settings`](TTIVI_PLATFORM_API)`.TimeFormat` enum
representing the current system setting stored in [Settings.System.TIME_12_24] as either
`TimeFormat.CLOCK_24H`, `TimeFormat.CLOCK_12H` or `TimeFormat.UNSET` in the case that no setting has
yet been set with this API.
